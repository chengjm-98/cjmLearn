<!--
 * @Author: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @Date: 2026-01-06 17:35:19
 * @LastEditors: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @LastEditTime: 2026-01-06 17:38:36
 * @FilePath: /cjmLearn/遇到的问题/大数据同时加载的处理/懒加载.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->

# 图片懒加载

## 传统做法，使用 getBoundingClientRect()判断是否进入可视区域

## 现代做法，使用 IntersectionObserver API

- 常见的属性

```jsx
entry.target; // 被观察的 DOM
entry.isIntersecting; // 是否进入可视区域（true / false）
entry.intersectionRatio; // 可见比例 0 ~ 1
entry.boundingClientRect;
entry.intersectionRect;
```

# 背

IntersectionObserver 是浏览器提供的一个 API，用来异步监听元素是否进入或离开可视区域。它不依赖 scroll 事件，也不需要手动计算位置，性能更好。
常用于图片懒加载、无限滚动、曝光埋点和虚拟列表的可视判断。核心参数包括 root、rootMargin 和 threshold，其中 root 可以指定滚动容器，rootMargin 可以提前触发，threshold 控制触发比例。
