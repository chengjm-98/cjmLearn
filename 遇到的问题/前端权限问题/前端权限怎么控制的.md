# 角色

{
"roles": ["admin", "editor"]
}
给 产品 / 运营 / 管理员 看得懂配权限方便

- 但是一般不会用于大项目
  - 一个用户可能多个角色
  - 新角色一加，前端全要改
  - 代码可维护性极差

# 权限码

- 用户 —— 多对多 —— 角色 —— 多对多 —— 权限码

{
"permissions": [
"user:add",
"user:edit",
"order:view",
"order:delete"
]
}

# 具体流程

1. 登录成功后，后端返回用户信息，包括角色和权限码
2. 前端根据用户信息，动态生成路由
3. 前端根据用户信息，动态生成菜单
4. 前端根据用户信息，动态生成按钮

## 路由

```jsx
const asyncRoutes = [
 {
   path: '/user',
   meta: { permission: 'user:view' },
   component: User
 },
 {
   path: '/order',
   meta: { permission: 'order:view' },
   component: Order
 }
]
登录后过滤
function filterRoutes(routes, permissions) {
 return routes.filter(route => {
   if (route.meta?.permission) {
     return permissions.includes(route.meta.permission)
   }
   return true
 })
}
没权限的路由：根本不存在
手输 URL：也进不去
```
