<!--
 * @Author: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @Date: 2025-12-30 20:09:46
 * @LastEditors: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @LastEditTime: 2026-01-07 11:03:51
 * @FilePath: /cjmLearn/遇到的问题/白屏的问题以及排查/白屏.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->

# 前端本地正常，但是线上白屏，会是什么问题？

## 接口的数据不太对，js 的代码匹配不上，导致白屏

- 看控制台有没有报错
- 本地 mock 的数据和线上的数据匹配不上，或者数据没做判空处理
- 接口失败未兜底

## 环境差异，环境变量问题

- 本地 .env.development 正常
- 线上 .env.production 缺变量
- 请求地址是 undefined

## webpack 配置有问题

- 比如使用了新语法，然后浏览器不兼容
- 比如地址配置有问题，比如使用了绝对路径，但是线上没有这个路径
- 有可能被 threeshaking 掉了
- 或者 loader 顺序有问题

## 静态资源问题

- 资源缓存问题：生产环境可能缓存了错误的静态资源（如 JS、CSS 文件）。尝试清除浏览器缓存或使用不同的浏览器进行测试。
- CDN 问题：如果你使用了 CDN，检查 CDN 是否正确提供了最新的资源文件，或者是否发生了文件过期或加载错误的情况。

## 性能问题

- 过大的 JavaScript 文件：生产环境中的 JS 文件可能比较大，导致页面加载非常慢，甚至白屏。可以考虑使用 Webpack 等工具进行代码分割（code splitting），减少初始加载的文件大小。
- 页面切换的时候资源加载崩溃，或者地图重新渲染导致的白屏

## 服务器挂了

- 静态资源的服务器挂了，比如一些图片，js，css 文件
- nginx 的配置有问题
- 接口服务器挂了 + 首屏强依赖接口

### 服务器报错的状态码

- 500 服务器代码异常，返回题为空或者错误信息
- 502 网关（Nginx / API Gateway）访问上游服务失败，可能是服务挂了，服务重启，容器崩了
- 503 服务不可用，服务重启过载限流。稍后再试
- 504 网关等上游服务器响应超时
- 401 认证失败，未登录或者 token 过期了，权限失效了。
- 403 权限不足，已登陆但是没权限
- 404 资源不存在，比如访问的接口不存在
- 200 请求成功
- 301 永久重定向，比如访问的接口被重定向了
- 302 临时重定向，比如访问的接口被重定向了
- 304 资源未修改，比如访问的接口被重定向了

## 规律

```jsx
资源没下来，不属于前端业务代码，看服务器；
资源下来了还白，看前端；
接口挂了是后端，但白屏了前端没做兜底或者判错前端也要背锅。
```

- HTML 如果没有返回，说明静态资源或服务器侧有问题，不属于前端业务代码。
- 如果 JS 加载成功但页面白屏，通常是前端运行时错误，可能由代码问题或接口异常数据触发。
- 接口报错本身是后端问题，但前端需要做好异常兜底，避免接口异常直接导致白屏。
