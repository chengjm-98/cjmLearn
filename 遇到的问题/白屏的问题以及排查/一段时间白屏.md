# 发生在哪个阶段

白屏 = Paint 没发生

```jsx
HTML 下载
   ↓
HTML 解析
   ↓
CSS 下载 & 解析
   ↓
JS 下载 & 执行
   ↓
DOM 构建
   ↓
CSSOM 构建
   ↓
Layout
   ↓
Paint（首帧）
```

| 类型       | 本质               |
| ---------- | ------------------ |
| 网络型白屏 | 资源迟迟没到       |
| 阻塞型白屏 | 资源到了但不能执行 |
| 计算型白屏 | 执行太慢           |
| 架构型白屏 | 根本没有内容       |

# 具体问题和分析

## ① HTML 迟迟没返回（TTFB 高）

- 表现
  - 打开页面很久才看到页面框架，DevTools 里 HTML 卡很久
- 原因
  - 后端慢/SSR 阻塞/CDN 回源慢
- 解决
  - CDN/HTML 静态化/边缘渲染/HTML 流式输出

## ② CSS 或 JS 阻塞（FP 高）

- 表现
  - HTML 有了但页面一片白/等 CSS 下完才突然出来
  - 页面必须等 JS 执行完才能显示
- 原因
  - css 太大/css 串形加载/打包体积太大/hydrate 慢/初始化逻辑重
- 解决
  - 拆分 css/js/压缩/预加载/预渲染/拆包/懒加载/动态加载/ssr

## ③ JS 执行慢（FCP 高）

- 表现
  - 资源已加载但页面迟迟不显示 CPU 占用 100%
- 原因
  - 大文件/大 json/复杂计算/大量数据渲染
- 解决
  - webworker/分片执行/懒加载/流式渲染

## 永久失败

- 看持续白屏

# 怎么排查

| 指标      | 含义          | 问题            |
| --------- | ------------- | --------------- |
| TTFB      | HTML 返回时间 | 后端问题        |
| FP        | 首像素        | css/js 阻塞问题 |
| FCP       | 首内容        | js 执行慢       |
| LCP       | 主内容        |
| DOM Ready | DOM 构建完成  | dom 构建慢      |

## --------------------------------------------------

Scripting 高 → JS 问题
Rendering 高 → 渲染问题
Loading 高 → 网络问题
