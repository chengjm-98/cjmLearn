# 受控组件

- 特点：表单元素的 值由 React 的 state 控制。
- 数据流：用户输入 → onChange → 更新 state → state 决定 input 的 value → 页面重新渲染。
- 优点：
  - React 完全掌控表单值
  - 容易做校验、格式化、联动
  - 表单数据可集中管理

# 非受控组件 (Uncontrolled Component)

- 特点：表单元素自己管理值，React 不直接控制。
- 数据流：用户输入 → input 自己保存 → React 通过 ref 获取值。
- 优点：
  - 写法简单
  - 适合一次性提交的表单

# 区别

| 特性     | 受控组件                     | 非受控组件               |
| -------- | ---------------------------- | ------------------------ |
| 值来源   | React state                  | DOM                      |
| 控制权   | React 控制                   | 元素自己控制             |
| 数据获取 | 直接访问 state               | 通过 ref 获取            |
| 优点     | 数据集中管理，可做校验和联动 | 简单快速，适合一次性表单 |
| 缺点     | 代码多，复杂表单略繁琐       | 数据不集中管理，联动复杂 |

# react 怎么实现双向绑定

- 受控组件
  React 本身是单向数据流框架，并没有内置像 Vue 的 v-model 那样的双向绑定机制。
  但我们可以通过受控组件的方式实现数据和视图的双向同步，本质是：
  视图变化触发 state 更新，state 更新再驱动视图更新。
- 封装成通用的双向绑定 Hook（加分项）

```jsx
function useModel(initialValue) {
  const [value, setValue] = useState(initialValue);

  return {
    value,
    onChange: (e) => setValue(e.target.value),
  };
}

// 使用
function Form() {
  const username = useModel("");

  return <input {...username} />;
}
```
