# è‡ªå®šä¹‰ hook

**å¤ç”¨é€»è¾‘è€Œä¸æ˜¯å¤ç”¨ UI**

æ—¢ç„¶æ˜¯å¤ç”¨é€»è¾‘ï¼Œé‚£ä¹ˆä¸€ä¸ªå…¬å…±çš„æ–¹æ³•ä¹Ÿå¯ä»¥å®ç°å¤ç”¨é€»è¾‘ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨è‡ªå®šä¹‰ hook?

**ä¸ä»…å¤ç”¨é€»è¾‘ï¼Œè€Œä¸”å°è£…äº†é€»è¾‘çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå‰¯ä½œç”¨ï¼‰**

## è‡ªå®šä¹‰ hook å’Œå‡½æ•°çš„å…³é”®åŒºåˆ†

| å¯¹æ¯”ç»´åº¦                                      | è‡ªå®šä¹‰ Hook              | æ™®é€šå‡½æ•°                    |
| --------------------------------------------- | ------------------------ | --------------------------- |
| æ˜¯å¦èƒ½ä½¿ç”¨å…¶ä»– Hookï¼ˆå¦‚ useStateã€useEffectï¼‰ | âœ… å¯ä»¥                  | âŒ ä¸è¡Œ                     |
| æ˜¯å¦å‚ä¸ React çš„æ¸²æŸ“æµç¨‹                     | âœ… æ˜¯                    | âŒ å¦                       |
| çŠ¶æ€æ˜¯å¦ä¸ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç»‘å®š                    | âœ… ç»‘å®šå½“å‰ç»„ä»¶          | âŒ ä¸ç»‘å®šï¼ˆè°ƒç”¨åå°±æ¶ˆå¤±ï¼‰   |
| æ˜¯å¦å¯ä»¥è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“                      | âœ… å¯ä»¥ï¼ˆé€šè¿‡ setStateï¼‰ | âŒ ä¸è¡Œ                     |
| çŠ¶æ€æ˜¯å¦æŒä¹…åŒ–ï¼ˆè·¨æ¸²æŸ“ä¿ç•™ï¼‰                  | âœ… æ˜¯ï¼ˆé€šè¿‡ Fiberï¼‰      | âŒ å¦ï¼ˆæ¯æ¬¡è°ƒç”¨éƒ½é‡æ–°æ‰§è¡Œï¼‰ |
| æ˜¯å¦å— Hook è°ƒç”¨é¡ºåºçº¦æŸ                      | âœ… æ˜¯                    | âŒ å¦                       |
| React DevTools æ˜¯å¦èƒ½è¿½è¸ª                     | âœ… èƒ½                    | âŒ ä¸èƒ½                     |

## è‡ªå®šä¹‰ hook çš„ä½¿ç”¨

### ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ hookï¼Ÿ

- è‡ªå®šä¹‰ hook æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªä»¥ use å¼€å¤´çš„**å‡½æ•°**,ä½†æ˜¯è¿™ä¸ªå‡½æ•°å†…éƒ¨å¯ä»¥ä½¿ç”¨å…¶ä»–çš„ hookã€‚
- è¿”å›çŠ¶æ€å’Œé€»è¾‘ç»“æœ
- å¯ä»¥æ¥å—å‚æ•°
- åªèƒ½åœ¨å‡½æ•°æœ€å¤–å±‚è°ƒç”¨ hookï¼Œä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ã€åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ hookã€‚
- è‡ªå®šä¹‰ hook ä¸ä¼šåˆ›å»ºç‹¬ç«‹çš„çŠ¶æ€ä½œç”¨åŸŸï¼Œå®ƒåªæ˜¯æŠŠé€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œä¾ç„¶å½’å±äºè°ƒç”¨å®ƒçš„ç»„ä»¶ã€‚

### å‚æ•°åŒ–å’Œå¯é…ç½®åŒ–

- è®©è‡ªå®šä¹‰ hook æ”¯æŒåŠ¨æ€å‚æ•°åŒ–å’Œå¯é…ç½®åŒ–ï¼Œè®©å®ƒæ›´åŠ çµæ´»å’Œå¯å¤ç”¨ã€‚

### çŠ¶æ€å…±äº«ï¼ˆå…¨å±€é€»è¾‘å¤ç”¨ï¼‰

- æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›ä¸åŒç»„ä»¶å…±åŒå…±äº«ä¸€ä»½çŠ¶æ€ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ hook æ¥å®ç°çŠ¶æ€å…±äº«ã€‚ï¼ˆåœ¨ä¸é€‚ç”¨ mobx ç­‰å…¨å±€ç®¡ç†å·¥å…·çš„å‰æä¸‹ï¼‰
- ä¸¾ä¸ª ğŸŒ° å­ï¼š

```jsx
const ThemeContext = createContext();
//è‡ªå®šä¹‰provider
export function ThemeProvider({ children }) {
  const [theme, setTheme] = useState("light");
  const toggle = () => setTheme((t) => (t === "light" ? "dark" : "light"));
  return (
    <ThemeContext.Provider value={{ theme, toggle }}>
      {children}
    </ThemeContext.Provider>
  );
}
// è‡ªå®šä¹‰hook
export function useTheme() {
  return useContext(ThemeContext);
}
//-----------ä½¿ç”¨---------
function Button() {
  const { theme, toggle } = useTheme();
  return <button onClick={toggle}>å½“å‰ä¸»é¢˜ï¼š{theme}</button>;
}
//-----------jsx---------
<ThemeProvider>
  <Button />
</ThemeProvider>;
```

### æ€§èƒ½ä¼˜åŒ–

- åœ¨è‡ªå®šä¹‰ Hook å†…éƒ¨ï¼Œä¹Ÿè¦ç¼“å­˜è®¡ç®—æˆ–å‡½æ•°ï¼Œé˜²æ­¢ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚æ¯”å¦‚ä½¿ç”¨ useMemoã€useCallback ç­‰ã€‚
