<!--
 * @Author: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @Date: 2025-12-30 17:03:14
 * @LastEditors: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @LastEditTime: 2025-12-30 17:13:39
 * @FilePath: /cjmLearn/计算机网络/攻击.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->

# xss

## 定义

XSS 是一种攻击方式，攻击者通过向网页中注入恶意脚本（通常是 JavaScript），从而在用户的浏览器中执行。攻击者可以窃取用户的敏感信息、劫持用户会话，甚至在受害者的浏览器中执行任意操作。

## 类型

- 反射型 XSS（Reflected XSS）：攻击者通过构造恶意 URL 或表单提交的方式，将恶意脚本发送到目标网站，并让网站反射回给用户执行。

- 存储型 XSS（Stored XSS）：攻击者将恶意脚本存储在目标网站的服务器上，例如提交评论时注入脚本，用户访问时脚本被执行。

- DOM-based XSS：利用网站客户端的 JavaScript 操作 DOM 时漏洞，攻击者通过修改 URL 或 JavaScript 来注入恶意脚本。

## 防御方法

- 输出编码（Output Encoding）：对用户输入的所有数据进行编码，确保数据不能被解析为可执行的代码。

- 内容安全策略（CSP）：设置 CSP，限制哪些资源可以加载并执行。

- 输入验证与过滤：对输入进行严格的验证和过滤，避免包含恶意脚本。

# csrf

## 定义

CSRF 攻击通过欺骗用户的浏览器发起未经授权的请求，以便在用户不知情的情况下执行敏感操作，例如转账、修改密码等。攻击者通常利用用户的身份信息（例如 Cookie）来伪装成受害者进行请求。

## 防御方法

- 验证 Referer 头：验证请求的 Referer 头是否来自合法的域名，防止 CSRF 攻击。
- 使用 CSRF Token：在表单中添加一个隐藏字段，包含一个随机生成的 Token，服务器验证 Token 的有效性。
- 使用 SameSite Cookie：设置 SameSite 属性为 Strict 或 Lax，防止跨站请求。
- 使用 HTTP 方法限制：只允许 GET 请求用于读取数据，不允许 POST、PUT、DELETE 等操作。
- 验证码：对于敏感操作，要求用户输入验证码以验证身份。

# sql 注入

## 定义

SQL 注入是一种通过在 Web 应用程序的输入字段中插入恶意的 SQL 语句，使得数据库执行非法操作的攻击方式。攻击者可以通过 SQL 注入读取、修改或删除数据库中的敏感数据。

## 防御方法

- 使用预处理语句（Prepared Statements）：通过预编译 SQL 语句，并将用户输入作为参数传入，避免 SQL 语句与用户输入混淆。

- 输入验证与过滤：对所有用户输入进行严格验证，避免非法字符进入 SQL 查询中。

- 最小化数据库权限：为数据库账户配置最小的权限，避免对数据的完全访问。

- 错误信息处理：避免直接向用户显示数据库错误信息，防止泄漏数据库结构信息。

# 命令注入

## 定义

命令注入是一种攻击方式，攻击者通过在 Web 应用程序的输入字段中插入恶意的命令，使得服务器执行这些命令，从而获取敏感信息或执行系统操作。

## 防御方法

- 输入验证与过滤：对所有用户输入进行严格验证，避免非法字符进入命令中。
- 最小化命令执行权限：为执行命令的账户配置最小的权限，避免对系统的完全访问。
- 错误信息处理：避免直接向用户显示命令执行的错误信息，防止泄漏敏感信息。

# 区别

| 攻击类型     | 概念                                   | 防御方法                                                 |
| ------------ | -------------------------------------- | -------------------------------------------------------- |
| **XSS**      | 注入恶意脚本到 Web 页面执行攻击        | 输出编码、CSP、输入验证、过滤                            |
| **CSRF**     | 伪造请求以执行受害者未授权的操作       | 使用 CSRF Token、检查 Referer/Origin 头、SameSite Cookie |
| **SQL 注入** | 注入恶意 SQL 语句操控数据库            | 使用预处理语句、输入验证、最小化数据库权限、错误信息处理 |
| **命令注入** | 执行操作系统命令控制服务器             | 不执行用户输入为命令、输入验证、最小化权限               |
| **目录穿越** | 通过特殊字符访问不允许访问的服务器文件 | 路径验证、使用绝对路径、权限控制、文件名规范化           |
