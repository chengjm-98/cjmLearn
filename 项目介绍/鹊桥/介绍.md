# 封装websocket

该系统是一个基于 WebSocket 的长连接通信平台，旨在提供跨页面、跨系统的实时数据交互能力，同时提供可视化管理功能。外部系统或页面只需引入统一的插件即可接入，无需关心底层连接逻辑，实现低成本、高可用的长连接能力。

#

- 模块化封装
  - 提供统一 JS 插件或 SDK，系统或页面只需引入即可实现长连接。
  - 插件封装了连接管理、重连、心跳检测、消息收发等逻辑。
- 跨系统/跨页面通信
  - 所有系统通过统一 WebSocket Server 进行消息路由。
  - 支持指定系统节点发送消息，也可进行全局广播。
  - 实现不同页面之间的实时数据同步，解耦系统。
- 可视化监控
  - 展示在线系统与节点状态。
  - 支持消息流向可视化、使用统计。
  - 可用于运维监控、调试和数据分析。
- 可扩展性与高可用性
  - 心跳与断线重连机制保证长连接稳定。
  - 支持按需扩展房间/分组功能，满足不同业务场景。

# 整体架构

- WebSocket Server：统一管理连接、路由消息、提供 API 给可视化后台。
- 客户端 SDK/插件：封装连接逻辑，提供简单接口（connect、send、on）。
- 可视化后台：展示系统、节点状态，消息流向和统计数据。

# 核心模块设计

- WebSocket Server
  - 连接管理：注册系统节点，心跳检测。
  - 消息路由：按系统/节点发送，支持广播。
  - API 支持：提供给可视化前端。
- 客户端 SDK
  - 自动连接/重连。
  - 消息发送/订阅接口。
  - 节点注册、心跳上报。
- 可视化后台
  - 展示在线系统和节点。
  - 可发送消息、统计数据。
  - 可视化节点关系图。
