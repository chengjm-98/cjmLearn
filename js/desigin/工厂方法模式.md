# è®¾è®¡æ¨¡å¼ï¼ˆç®€å•å·¥å‚æ¨¡å¼/å·¥å‚è®¾è®¡æ¨¡å¼/æŠ½è±¡å·¥å‚æ¨¡å¼ï¼‰åˆ›å»ºå‹

## å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰

\*_å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­_

## ç®€å•å·¥å‚æ¨¡å¼

### å®šä¹‰

ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factory Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»ï¼Œè¯¥ç±»è´Ÿè´£æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ›å»ºä¸åŒç±»å‹çš„å¯¹è±¡ã€‚ \*_é¦–å…ˆæ˜¯å‡ ç§ä¸åŒçš„äº§å“_

### ç‰¹ç‚¹

### å…·ä½“å®ç°

```ts
//äº§å“çš„æ¥å£
interface ClockInterface {
  tick(): void;
}
//é’Ÿè¡¨äº§å“ç±»
class WatchClock implements ClockInterface {
  tick(): void {
    console.log("æ‰‹è¡¨ dida dida");
  }
  specialMethod(): void {
    console.log("æ‰‹è¡¨ç‰¹æ®Šæ–¹æ³•");
  }
}
//æ•°å­—é’Ÿ
class DigitalClock implements ClockInterface {
  tick(): void {
    console.log("æ•°å­—é’Ÿ beng beng");
  }
  specialMethod(): void {
    console.log("æ•°å­—é’Ÿç‰¹æ®Šæ–¹æ³•");
  }
}
```

\*_ç„¶åé€šè¿‡åˆ›å»ºä¸€ä¸ªç®€å•å·¥å‚ç±»ï¼Œç„¶åè°ƒç”¨_

```ts
//ç®€å•å·¥å‚ç±»
class ClockFactory {
  createClock(type: string): ClockInterface {
    switch (type) {
      case "digital":
        return new DigitalClock();
      case "watch":
        return new WatchClock();
      default:
        throw new Error("type error");
    }
  }
}
//å®¢æˆ·ç«¯
console.log("------------------");
let factory = new ClockFactory();
let digitalClock = factory.createClock("digital");
let watchClock = factory.createClock("watch");
digitalClock.tick();
watchClock.tick();
```

**æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¹ˆå†™ï¼Œä½ éœ€è¦ç»´æŠ¤ä¸€ä¸ª if else è¯­å¥æˆ–è€…ä¸€ä¸ª switch è¯­å¥ï¼Œå½“ä½ å¢åŠ ä¸€ä¸ªäº§å“ç±»çš„æ—¶å€™ï¼Œä½ éœ€è¦ä¿®æ”¹è¿™ä¸ªå·¥å‚ç±»ï¼Œè¿™æ˜¯ä¸ç¬¦åˆå¼€é—­åŸåˆ™çš„**  
ğŸ”´**å½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ä¸€ä¸‹ï¼š**

```ts
//æ„é€ å‡½æ•°ç­¾å æ¥å£
interface ClockConstructor {
  new (): ClockInterface;
}
//ç®€å•å·¥å‚ç±»
class ClockFactory {
  createClock(ctor: ClockConstructor): ClockInterface {
    return new ctor();
  }
}
//å®¢æˆ·ç«¯
console.log("------------------");
let factory = new ClockFactory();
let digitalClock = factory.createClock(DigitalClock);
let watchClock = factory.createClock(WatchClock);
digitalClock.tick();
watchClock.tick();
```

\*_è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¼ å…¥ä¸€ä¸ªæ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å°±ç¬¦åˆå¼€é—­åŸåˆ™äº†ã€‚ä½†æ˜¯å®ƒä»ç„¶æ˜¯ç®€å•å·¥å‚æ¨¡å¼_

## å·¥å‚æ–¹æ³•æ¨¡å¼

### å®šä¹‰

å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚Factory Method ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚
å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒï¼šåˆ›å»ºé€»è¾‘äº¤ç»™å­ç±»å®ç°ï¼Œå®¢æˆ·ç«¯åªéœ€ä¾èµ–æŠ½è±¡ç±»ï¼ˆæ¥å£ï¼‰ï¼Œè€Œä¸æ˜¯å…·ä½“ç±»ã€‚

### å¥½å¤„

1. ç¬¦åˆå¼€é—­åŸåˆ™ã€‚
2. è§£è€¦åˆ›å»ºå’Œä½¿ç”¨ã€‚å®¢æˆ·ç«¯ä»£ç åªä¾èµ–åŸºç±»ï¼Œä¸ç›´æ¥ä¾èµ–å…·ä½“ç±»ã€‚
3. æé«˜ä»£ç å¤ç”¨æ€§ã€‚

### ç”¨å¤„

1. å½“ä¸€ä¸ªç±»ä¸çŸ¥é“å®ƒæ‰€å¿…é¡»åˆ›å»ºçš„å¯¹è±¡çš„ç±»çš„æ—¶å€™ã€‚
2. å½“ä¸€ä¸ªç±»å¸Œæœ›ç”±å®ƒçš„å­ç±»æ¥æŒ‡å®šå®ƒæ‰€åˆ›å»ºçš„å¯¹è±¡çš„æ—¶å€™ã€‚
3. å½“ç±»å°†åˆ›å»ºå¯¹è±¡çš„èŒè´£å§”æ‰˜ç»™å¤šä¸ªå¸®åŠ©å­ç±»ä¸­çš„æŸä¸€ä¸ªï¼Œå¹¶ä¸”ä½ å¸Œæœ›å°†å“ªä¸€ä¸ªå¸®åŠ©å­ç±»æ˜¯ä»£ç†è€…è¿™ä¸€ä¿¡æ¯å±€éƒ¨åŒ–çš„æ—¶å€™ã€‚

### å…³é”®

1. è¦æœ‰ä¸€ä¸ªæŠ½è±¡å·¥å‚ç±»ï¼Œè¿™ä¸ªç±»ä¸­æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæŠ½è±¡äº§å“ç±»ã€‚
2. è¦æœ‰ä¸€ä¸ªå…·ä½“å·¥å‚ç±»ï¼Œè¿™ä¸ªç±»ç»§æ‰¿è‡ªæŠ½è±¡å·¥å‚ç±»ï¼Œç”¨äºå®ç°æŠ½è±¡å·¥å‚ã€‚

### ä¸€ä¸ªå®ç°æ¨¡æ¿

```js
//äº§å“çš„æ¥å£
interface ClockInterface {
  tick(): void;
}
//é’Ÿè¡¨äº§å“ç±»
class WatchClock implements ClockInterface {
  tick(): void {
    console.log("æ‰‹è¡¨ dida dida");
  }
  specialMethod(): void {
    console.log("æ‰‹è¡¨ç‰¹æ®Šæ–¹æ³•");
  }
}
//æ•°å­—é’Ÿ
class DigitalClock implements ClockInterface {
  tick(): void {
    console.log("æ•°å­—é’Ÿ beng beng");
  }
  specialMethod(): void {
    console.log("æ•°å­—é’Ÿç‰¹æ®Šæ–¹æ³•");
  }
}
interface ClockConstructor {
  new (): ClockInterface;
}

//æŠ½è±¡å·¥å‚ç±»
abstract class ClockFactory {
  abstract createClock(): ClockInterface;
  public someOperation(): void {
    const product = this.createClock();
    product.tick();
  }
}
//æ‰‹è¡¨å·¥å‚
class WatchFactory extends ClockFactory {
  createClock(): ClockInterface {
    return new WatchClock();
  }
}
//æ•°å­—é’Ÿå·¥å‚
class DigitalFactory extends ClockFactory {
  createClock(): ClockInterface {
    return new DigitalClock();
  }
}

//å®¢æˆ·ç«¯
function clientCode(creator: ClockFactory) {
  console.log("Client:æˆ‘ä¸çŸ¥é“åˆ›å»ºè€…çš„ç±»ï¼Œä½†æ˜¯å®ƒä»ç„¶åœ¨å·¥ä½œ");
  creator.someOperation();
}
console.log("App: å¯åŠ¨");
clientCode(new WatchFactory());
console.log("");
console.log("App: å¯åŠ¨");
clientCode(new DigitalFactory());

```

### ä¸€äº›å…·ä½“ä½¿ç”¨æƒ…å†µ

## ç®€å•å·¥å‚æ¨¡å¼å’Œå·¥å‚æ–¹æ³•æ¨¡å¼çš„åŒºåˆ«

![alt text](1741939018805.png)
