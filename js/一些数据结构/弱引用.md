<!--
 * @Author: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @Date: 2026-01-07 14:07:30
 * @LastEditors: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git
 * @LastEditTime: 2026-01-16 13:36:51
 * @FilePath: /cjmLearn/js/一些数据结构/弱引用.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->

# 弱引用

在前端（JavaScript）里，“弱引用（Weak Reference）”通常指的是 不会阻止垃圾回收（GC）回收对象的引用。它的核心作用是：既能访问对象，又不影响对象被回收的时机。

```jsx
let obj = { name: "Tom" };
let weakRef = new WeakRef(obj);
即使 weakRef 还存在，只要没有其他强引用，obj 依然可以被 GC 回收。
```

# 强引用

```jsx
let obj = { name: "Tom" };
let ref = obj;   // 强引用
只要 ref 存在，obj 就不会被垃圾回收。
```

# 常用场景

业务核心数据/状态管理/重要逻辑依赖不适合用弱引用

- 1. 缓存：弱引用通常用于缓存对象，因为它们不会阻止对象被回收。

```jsx
const cache = new Map();
const weakCache = new WeakRef(heavyObject);
避免缓存导致内存泄漏。
```

- 2. dom 关联数据

```jsx
const wm = new WeakMap();

function bindData(el, data) {
  wm.set(el, data);
}
```
