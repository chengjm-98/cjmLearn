# 迭代器

迭代器是一个实现了 next() 方法的对象，next() 方法返回一个包含 value 和 done 的对象：

value：当前的值。

done：一个布尔值，表示是否已经遍历完所有元素。

每次调用 next() 方法时，都会返回下一个值，直到集合遍历完毕，done 被设置为 true。

```jsx
const arr = [10, 20, 30];
const iterator = arr[Symbol.iterator](); // 获取数组的迭代器

console.log(iterator.next()); // { value: 10, done: false }
console.log(iterator.next()); // { value: 20, done: false }
console.log(iterator.next()); // { value: 30, done: false }
console.log(iterator.next()); // { value: undefined, done: true }
```

# 可迭代对象

可迭代对象是实现了 Symbol.iterator 方法的对象，这个方法返回一个迭代器。所有可迭代对象都可以使用 for...of 循环进行遍历。

## 常见的可迭代对象有：

数组：数组是可迭代对象。

字符串：字符串是可迭代对象。

Set：Set 集合是可迭代对象。

Map：Map 集合是可迭代对象。

Symbol.iterator 方法会返回一个迭代器对象，迭代器对象的结构必须实现一个 next() 方法。

# 手写一个迭代器

```jsx
class ArrayIterator {
  constructor(arr) {
    this.arr = arr; // 存储要遍历的数组
    this.index = 0; // 当前的索引
  }

  // 实现迭代器接口的 next 方法
  next() {
    if (this.index < this.arr.length) {
      // 返回当前元素并增加索引
      return { value: this.arr[this.index++], done: false };
    } else {
      // 遍历完毕，返回 done 为 true
      return { value: undefined, done: true };
    }
  }

  // 可选的，提供[Symbol.iterator]方法，支持for...of循环
  [Symbol.iterator]() {
    return this; // 返回自身作为迭代器
  }
}

// 使用这个迭代器
const arr = [1, 2, 3, 4, 5];
const iterator = new ArrayIterator(arr);

console.log(iterator.next()); // { value: 1, done: false }
console.log(iterator.next()); // { value: 2, done: false }
console.log(iterator.next()); // { value: 3, done: false }
console.log(iterator.next()); // { value: 4, done: false }
console.log(iterator.next()); // { value: 5, done: false }
console.log(iterator.next()); // { value: undefined, done: true }

// 使用 for...of 循环
for (let value of new ArrayIterator(arr)) {
  console.log(value); // 输出 1, 2, 3, 4, 5
}
```
